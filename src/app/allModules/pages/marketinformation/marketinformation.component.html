<div id="dashboard" class="page-layout carded">
  <!-- <div class="center" fxLayout="column" fxLayoutGap="10px"> -->

  <mat-card class="headerbackgrnd">
    <div fxLayout>
      <div fxFlex fxLayoutAlign="start center" style="height: 2px">
        <img src="../../assets/images/exalca_white_logo.png" style="width: 5%;height:15px;">
        <p class="title">Customer Portal</p>
      </div>
    </div>
  </mat-card>
  <div fxLayout="row" fxFlex="100" style="background: white !important;">
    <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="10px" fxFlex="20" style="margin-top:45px">
      <div class="market">Market </div>
      <div class="information">Information</div>
      <img class="image" src="../../assets/images/Marketplan.svg">
      <!-- <div class="mins">2 mins</div>
        <div class="avg">Average Time to Complete</div> -->
      <!-- <mat-progress-bar mode="determinate" value="80" class="progress"></mat-progress-bar>
        <div class="percent">96%     Almost done!</div> -->
      <img class="jkc" src="../../assets/images/jkc_logo.svg">
    </div>
    <div fxFlex="10"> </div>
    <div fxFlex="70">
      <form [formGroup]="MIform" style="margin-top: 37px;">
        <div fxLayout="column" fxLayoutAlign="space-around center">
          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="marketinfo" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Name of Market</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Name of Market" formControlName="market"
                class="inputform " required>

            </div>

          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Population of Market</span>

            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Population of  Market" formControlName="Population"
                class="inputform " required (keypress)="decimalOnly($event)">

            </div>


          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Market Potential of the area (in MT) *</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Market Potential of the area (in MT)"
                formControlName="Potential" class="inputform " required (keypress)="decimalOnly($event)">
              <mat-error class="errorn"
                *ngIf=" MIform?.get('Potential')?.touched && MIform?.get('Potential')?.hasError('required')">Market
                Potential is
                required
              </mat-error>
            </div>

          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">No of Existing Stockist in the Market</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="No of Existing Stockist in the Market"
                formControlName="Stockist" class="inputform " required (keypress)="decimalOnly($event)">

            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Distance of Nearest JK Stockist</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Distance of Nearest JK Stockist"
                formControlName="Distance" class="inputform " required (keypress)="decimalOnly($event)">

            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Name of Nearest JK Stockist</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Name of Nearest JK Stockist"
                formControlName="NameOfNearest" class="inputform " required>

            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Year of Establishment *</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">


              <input autocomplete="off" matInput mode="YEAR" placeholder="Year of Establishment"
                formControlName="YearOfEstablished" class="inputform " (keypress)="keyPressNumbers($event)" required>

              <mat-error class="errorn"
                *ngIf=" MIform?.get('YearOfEstablished')?.touched && MIform?.get('YearOfEstablished')?.hasError('required')">
                Year of Establishment is
                required
              </mat-error>

            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Areas that Stockist will serve</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Areas that Stockist will serve"
                formControlName="AreasStockist" class="inputform " required (keypress)="decimalOnly($event)">



            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Total Potential of the Party (In MT) *</span>

            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" type="number" matInput placeholder="Total Potential of the Party (In MT)"
                formControlName="TotalPotential" class="inputform " required (keypress)="decimalOnly($event)">


              <mat-error class="errorn"
                *ngIf=" MIform?.get('TotalPotential')?.touched && MIform?.get('TotalPotential')?.hasError('required')">
                Total Potential of the Party (In MT) is
                required
              </mat-error>

            </div>
          </div>

          <div *ngIf="CustmerView" fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Expected JK Avg.Monthly Sale (In MT) *</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" type="number" matInput placeholder="Expected JK Avg.Monthly Sale (In MT)"
                formControlName="JKAvg" class="inputform " required (keypress)="decimalOnly($event)">

              <mat-error class="errorn"
                *ngIf=" MIform?.get('JKAvg')?.touched && MIform?.get('JKAvg')?.hasError('required')">Expected JK
                Avg.Monthly Sale (In MT) is
                required
              </mat-error>

            </div>
          </div>

          <div fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Pan No.of Business *</span>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <input autocomplete="off" matInput placeholder="Pan No.of Business" (keyup)="IsPanValid()"
                formControlName="Pan" class="inputform " required>
              <mat-icon [ngClass]="{'panicon':ispan===true,'panicon2':ispan===false}">done</mat-icon>
              <mat-error class="errorn" *ngIf=" MIform?.get('Pan')?.touched && MIform?.get('Pan')?.hasError('pattern')">
                Invalid Pan
              </mat-error>
              <mat-error class="errorn" *ngIf=" MIform?.get('Pan')?.touched && MIform?.get('Pan')?.hasError('required')">
                Pan No.of Business
                is
                required
              </mat-error>

            </div>
          </div>

          <div fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <span fxFlex="30" class="marketsp">Gst No.of Business *</span>
            <!-- <div fxLayout="row"> -->
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">

              <input autocomplete="off" matInput placeholder="Gst No.of Business" formControlName="Gst"
                (keyup)="IsGstValid()" class="inputform " required>

              <mat-icon [ngClass]="{'gsticon':isgst===true,'gsticon2':isgst===false}">done</mat-icon>
              <mat-error class="errorn" *ngIf=" MIform?.get('Gst')?.touched && MIform?.get('Gst')?.hasError('pattern')">
                Invalid Gst
              </mat-error>
              <mat-error class="errorn" *ngIf=" MIform?.get('Gst')?.touched && MIform?.get('Gst')?.hasError('required')">
                Gst No.of Business
                is
                required
              </mat-error>

            </div>

            <!-- <div fxLayout="column">
              
            </div> -->
            <!-- </div> -->
          </div>

          <div fxLayout="row" fxLayoutAlign="" class="populationclass" fxFlex="100">
            <div fxFlex="10"></div>
            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="30">
              <span class="marketsp">Party Background *</span>
              <!-- <div class="one"> (Option to select one)</div> -->
            </div>



            <div fxLayout="column" fxLayoutAlign="start start" fxFlex="48" class="">
              <!-- <mat-form-field appearance="outline" style="width: 80%;margin-top: 10px;"> -->

              <mat-select [(value)]="selected" placeholder="Select the Party Background"
                formControlName="PartyBackground" style="height: 40px;" class="inputform2">
                <mat-option value="1">Paint</mat-option>
                <mat-option value="2">Grey Cement</mat-option>
                <mat-option value="3">Hardware</mat-option>
                <mat-option value="4">Wall Putty</mat-option>
                <mat-option value="5">White cement</mat-option>
                <mat-option value="6">Sanitary</mat-option>
                <mat-option value="7">Water Proofing Chemicals</mat-option>
                <mat-option value="8">others</mat-option>
              </mat-select>

              <!-- <mat-select placeholder="Select the Party Background" formControlName="PartyBackground" style="height: 40px;" class="inputform ">
                    <mat-option *ngFor="let party of partylist" [value]="party" [(value)]="selected">{{party}}</mat-option>
                  </mat-select> -->
              <mat-error class="errorn"
                *ngIf="MIform?.get('PartyBackground')?.touched && MIform?.get('PartyBackground')?.hasError('required')">
                Party Background
                is
                required
              </mat-error>
              <!-- </mat-form-field> -->
            </div>
          </div>
        </div>
      </form>
      <!-- *ngIf="selected===4 || selected===5" -->
      <form [formGroup]="BrandForm" *ngIf="selected=='4' || selected=='5'">
        <div fxLayout="column" style="width:60%;margin-left: 10%;">

          <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="20px" style="margin-top: 3%;">
            <div fxLayout="column" fxFlex="60">
              <div fxLayout="row">
                <mat-label style="margin-bottom: 10px;font-size: 13px;font-weight: 500;">Brand Name</mat-label>
              </div>
              <div fxLayout="row" fxFlex="60" class="">



                <mat-select placeholder="Select the Brand Name" formControlName="brand" class="" style="width: 200px;">
                  <mat-option *ngFor="let brand of brandName" [value]="brand">{{brand}}</mat-option>
                </mat-select>
                <mat-error class="errorn"
                  *ngIf="MIform?.get('brand')?.touched && MIform?.get('brand')?.hasError('required')">
                  Brand Name
                  is
                  required
                </mat-error>

              </div>
            </div>
            <div fxLayout="column" fxFlex="60">
              <div fxLayout="row">
                <mat-label style="margin-bottom: 10px;font-weight: 500;">White Cement</mat-label>
              </div>
              <div fxLayout="row" fxFlex="60" class="">
                <input autocomplete="off" matInput placeholder="Please Enter WC Avg sale" style="width: 200px;"
                  formControlName="wcMonth" class="inputform" type="number" required>

              </div>
            </div>
            <div fxLayout="column" fxFlex="60">
              <div fxLayout="row">
                <mat-label style="margin-bottom: 10px;font-weight: 500;">Wall Putty</mat-label>
              </div>
              <div fxLayout="row" fxFlex="60" class="">
                <input autocomplete="off" matInput placeholder="Please Enter WP Avg sale" style="width: 200px;"
                  formControlName="wpMonth" class="inputform" type="number" required>

              </div>
            </div>
            <div fxLayout="column">
              <button mat-flat-button style="margin-top: 34px;" (click)="onAdd()">+</button>

            </div>
          </div>
          <mat-card class="cement">


            <div fxLayout="row">


              <table>
                <thead>
                  <tr>
                    <th>Brand Name </th>
                    <th>WP Avg/Month Sales (In Mt)</th>
                    <th>WC Avg/Month sales (In MT)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of listData even as isEven"
                    [ngStyle]="{ background: isEven ? 'white' : '#f1f1f5'}">
                    <td><span>{{item?.brand}}</span></td>
                    <td><span>{{item?.wpMonth}}</span></td>
                    <td><span>{{item?.wcMonth}}</span></td>

                  </tr>
                </tbody>
              </table>
            </div>

          </mat-card>
        </div>

      </form>
    </div>
  </div>
  <div fxLayout="row" fxLayoutAlign="end end" fxFlex="100" fxLayoutGap="4px"
    style="margin-top: 23px;background: white;">
    <div fxFlex="33"></div>
    <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="0px">
      <button mat-flat-button class="previous" (click)="previousbtn()" fxLayout="row" fxLayoutGap="10px">
        <img class="previousimg" src="../../assets/images/previous.svg">
        <span class="prev_span">
          Previous
        </span>
      </button>
    </div>
    <!-- <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="0px" style="margin-left:-20px">
        <button mat-flat-button class="next" (click)="nextbtn()">Next
          <img class="nextimg" src="../../assets/images/next.svg">
        </button>
      </div> -->
    <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="5px">
      <button mat-flat-button class="clear" (click)="ClearAll()" fxLayout="row" fxLayoutGap="10px"
        style="width: 100%;column-gap: 20px !important;">
        <img class="clearimg" src="../../assets/images/clear.svg">
        <span class="prev_span">
          Clear
        </span>
      </button>
    </div>
    <!-- <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="5px" style="margin-left:-38px">
        <button mat-flat-button class="draft" (click)="ClearAll()"> Save as Draft
          <img class="draftimg" src="../../assets/images/bi.png">
        </button>
      </div> -->
    <!-- [disabled]="MIform.required.invalid" -->
    <button mat-raised-button class="savebtn mr-48" (click)="SubmitButtonClick()">Save & Next</button>
  </div>
  <br>
  <mat-progress-spinner *ngIf=" isProgressBarVisibile" class="progressBarPostion" mode="determinate" value="40">
  </mat-progress-spinner>
  <div id="overlay" *ngIf="isProgressBarVisibile"></div>
</div>