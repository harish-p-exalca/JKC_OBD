<div id="business" class="page-layout carded" fusePerfectScrollbar>
  <mat-card class="headerbackgrnd">
    <div fxLayout>
      <div fxFlex fxLayoutAlign="start center" style="height: 2px">
        <img src="../../assets/images/exalca_white_logo.png" style="width: 5%;height:15px;">
        <p class="title">Customer Portal</p>
      </div>
    </div>
  </mat-card>
  <div fxLayout="row" fxFlex="100" style="margin-top:32px">
    <div fxLayout="column" fxLayoutAlign="start center" fxFlex="20" style="margin-top: 60px;">
      <div class="market">Business </div>
      <div class="information">Information</div>
      <img class="image" src="../../assets/images/Businessplan.svg">
      <!-- <div class="mins">30 secs</div>
        <div class="avg">Average Time to Complete</div> -->
      <!-- <mat-progress-bar mode="determinate" value="80" class="progress"></mat-progress-bar>
        <div class="percent">98% Almost Done!</div> -->
      <img class="jkc" src="../../assets/images/jkc_logo.svg">
    </div>
    <div fxFlex></div>
    <div fxFlex="70" style="background:white;" fxLayout="column" fxLayoutAlign="start" class="sub_div1">
      <form [formGroup]="BIform" fxLayoutAlign="space-around start" class="form_div">
        <div fxLayout="column" class="form_div_I">
          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">Total Turn Over of 3 years*</span>
            <div fxLayout="row" fxFlex="35" fxLayoutAlign="start start" class="inp_div" fxLayoutGap="10px">
              <div fxLayout="row" fxFlex="100" class="inner-inp_div" fxLayoutGap="20px">
                <div fxLayout="column" fxFlex="38">
                  <input autocomplete="off" placeholder="FY 21-22" formControlName="NoOfYears" class="inputform1 "
                    required (keypress)="keyPressNumbers($event)">
                  <mat-error class="errorn"
                    *ngIf="BIform?.get('NoOfYears')?.touched && BIform?.get('NoOfYears')?.hasError('required')">
                    Turn over 1
                    is
                    required
                  </mat-error>
                </div>
                <div fxLayout="column" fxLayoutAlign="" fxFlex="38">
                  <input autocomplete="off" placeholder="FY 20-21" formControlName="NoOfYears1" class="inputform1 "
                    required (keypress)="keyPressNumbers($event)">
                  <mat-error class="errorn"
                    *ngIf="BIform?.get('NoOfYears1')?.touched && BIform?.get('NoOfYears1')?.hasError('required')">
                    Turn over 2
                    is
                    required
                  </mat-error>
                </div>
                <div fxLayout="column" fxLayoutAlign="" fxFlex="38">
                  <input autocomplete="off" placeholder="FY 19-20" formControlName="NoOfYears2" class="inputform1 "
                    required (keypress)="keyPressNumbers($event)">
                  <mat-error class="errorn"
                    *ngIf="BIform?.get('NoOfYears2')?.touched && BIform?.get('NoOfYears2')?.hasError('required')">
                    Turn over 3
                    is
                    required
                  </mat-error>
                </div>
              </div>
            </div>
          </div>

          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">Total Storage Capacity*</span>
            <div fxLayout="column" fxLayoutAlign="start start" class="inp_div">
              <div fxLayout="column" fxFlex="100" class="inner-inp_div">
                <input autocomplete="off" placeholder=" Enter the capacity" formControlName="storagecapacity"
                  class="inputform" (keypress)="keyPressNumbers($event)" required>
                <mat-error class="errorn"
                  *ngIf="BIform?.get('storagecapacity')?.touched && BIform?.get('storagecapacity')?.hasError('required')">
                  Capacity
                  is
                  required
                </mat-error>
              </div>
            </div>
          </div>

          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">Working Capital to be Invested*</span>
            <div fxLayout="column" fxLayoutAlign="start start" class="inp_div">
              <div fxLayout="column" fxFlex="100" class="inner-inp_div">
                <input autocomplete="off" placeholder=" Enter the working captial" formControlName="capitalinvest"
                  class="inputform" required>
                <mat-error class="errorn"
                  *ngIf="BIform?.get('capitalinvest')?.touched && BIform?.get('capitalinvest')?.hasError('required')">
                  Working Capital
                  is
                  required
                </mat-error>
              </div>
            </div>

          </div>

          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">No of Vehicle Owned with Capacity*</span>
            <div fxLayout="column" fxLayoutAlign="start start" class="inp_div">
              <div fxLayout="column" fxFlex="100" class="inner-inp_div">
                <input autocomplete="off" placeholder=" Enter No.of.Vehicle owned" formControlName="vehicle"
                  class="inputform" required (keypress)="keyPressNumbers($event)">
                <mat-error class="errorn"
                  *ngIf="BIform?.get('vehicle')?.touched && BIform?.get('vehicle')?.hasError('required')">
                  No of Vehicle Owned
                  is
                  required
                </mat-error>
              </div>
            </div>
          </div>

          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">% Sales in Wholesale</span>
            <div fxLayout="column" fxLayoutAlign="start start" class="inp_div">
              <div fxLayout="column" fxFlex="100" class="inner-inp_div">
                <input autocomplete="off" max="100" maxlength="3" (keypress)="keyPressNumbers($event)" placeholder=" Enter sales in wholesale"
                  formControlName="Wholesale" class="inputform" required>
                <mat-error class="errorn"
                  *ngIf="BIform?.get('Wholesale')?.touched && BIform?.get('Wholesale')?.hasError('required')">
                  Wholesale
                  is
                  required
                </mat-error>
              </div>
            </div>
          </div>

          <div fxLayout="row" class="populationclass" fxFlex="100" fxLayoutAlign="start center">
            <span fxFlex="35" class="marketsp">% Sales in Retail</span>
            <div fxLayout="column" fxLayoutAlign="start start" class="inp_div">
              <div fxLayout="column" fxFlex="100" class="inner-inp_div">
                <input autocomplete="off" placeholder=" Enter sales in retail" formControlName="retail"
                  class="inputform" readonly required (keypress)="keyPressNumbers($event)">
                <mat-error class="errorn"
                  *ngIf="BIform?.get('retail')?.touched && BIform?.get('retail')?.hasError('required')">
                  Retail
                  is
                  required
                </mat-error>
              </div>
            </div>
          </div>

        </div>
      </form>

      <div fxLayout="column" style="margin-left: 2%;">
        <div class="cement" fxLayout="column">
          <div fxLayout="row" fxFlex fxLayoutAlign="space-between center" style="padding-bottom: 16px;">
            <span class="table-title">Sale Target & Commitment (In MT)</span>
            <button mat-flat-button class="addrow" (click)="addBtnClicked()">+</button>
          </div>
          <div class="table-container">
            <table mat-table [dataSource]="dataSource" class="table_ext">
              <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns;index as i;">
                <th mat-header-cell *matHeaderCellDef class="tbls_hdr"> {{column}} </th>
                <td mat-cell *matCellDef="let element;index as j;" class="tble_data">
                  <span *ngIf="i==0">{{element[column]}}</span>
                  <input (keypress)="decimalOnly($event)" [(ngModel)]="salesTargetArr[i-1][j]" maxlength="3" placeholder="_" *ngIf="i>0" matInput class="tbl_input"/>
                  <!-- [(ngModel)]="salesTargetArr[i][j]" -->
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div fxLayout="row" fxLayoutAlign="end center" fxFlex="100" fxLayoutGap="20px"
    style="margin-top: 16px;background: white;padding: 0 32px;">
    <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="0px">
      <button mat-flat-button class="previous" (click)="previousbtn()" fxLayout="row" fxLayoutGap="10px">
        <img class="previousimg" src="../../assets/images/previous.svg">
        <span class="prev_span">
          Previous
        </span>
      </button>
    </div>
    <!-- <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="0px" style="margin-left:-20px">
          <button mat-flat-button class="next" (click)="nextbtn()">Next
            <img class="nextimg" src="../../assets/images/next.svg">
          </button>
        </div> -->
    <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="5px">
      <button mat-flat-button class="clear" (click)="ClearAll()" fxLayout="row" fxLayoutGap="10px"
        style="width: 100%;column-gap: 20px !important;">
        <img class="clearimg" src="../../assets/images/clear.svg">
        <span class="prev_span">
          Clear
        </span>
      </button>
    </div>
    <!-- <div fxLayout="row" fxLayoutAlign="start start" fxFlex="10" fxLayoutGap="5px" style="margin-left:-38px">
          <button mat-flat-button class="draft" (click)="ClearAll()" fxLayout="row" fxLayoutGap="10px"> 
            <img class="draftimg" src="../../assets/images/bi.png">
            <span class="prev_span">
              Save as Draft
            </span>
          </button>
        </div> -->
    <button mat-raised-button class="savebtn" (click)="SubmitButtonClick()">Save & Next</button>
  </div>
  <br>

  <mat-progress-spinner *ngIf=" isProgressBarVisibile" class="progressBarPostion" mode="determinate" value="40">
  </mat-progress-spinner>
  <div id="overlay" *ngIf="isProgressBarVisibile"></div>
</div>